{"version":3,"sources":["../../node_modules/@angular/core/esm5 lazy","../../src lazy","../../src/cordova-background-geolocation.ts","../../src/ENV.ts","../../src/lib/authorization.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/app/app.component.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 109;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/esm5 lazy\n// module id = 109\n// module chunks = 8","var map = {\n\t\"../pages/advanced/advanced.module\": [\n\t\t272,\n\t\t0\n\t],\n\t\"../pages/advanced/modals/about/about.module\": [\n\t\t273,\n\t\t7\n\t],\n\t\"../pages/advanced/modals/geofence/geofence.module\": [\n\t\t274,\n\t\t6\n\t],\n\t\"../pages/advanced/modals/settings/settings.module\": [\n\t\t276,\n\t\t5\n\t],\n\t\"../pages/hello-world/hello-world.module\": [\n\t\t275,\n\t\t4\n\t],\n\t\"../pages/home/home.module\": [\n\t\t278,\n\t\t3\n\t],\n\t\"../pages/home/registration/registration.module\": [\n\t\t277,\n\t\t2\n\t],\n\t\"../pages/simple-map/simple-map.module\": [\n\t\t279,\n\t\t1\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids)\n\t\treturn Promise.reject(new Error(\"Cannot find module '\" + req + \"'.\"));\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(ids[0]);\n\t});\n};\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 150;\nmodule.exports = webpackAsyncContext;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 150\n// module chunks = 8","/**\n* This is just a helper for including the plugin from either the public npm version or the latest\n* release from private version (customers only)\n*/\n\nimport BackgroundGeolocation, {\n  State,\n  Config,\n  Location,\n  LocationError,\n  Geofence,\n  HttpEvent,\n  MotionActivityEvent,\n  ProviderChangeEvent,\n  MotionChangeEvent,\n  GeofenceEvent,\n  GeofencesChangeEvent,\n  HeartbeatEvent,\n  ConnectivityChangeEvent,\n  DeviceSettings,\n  DeviceSettingsRequest,\n  SQLQuery,\n  Authorization, AuthorizationEvent,\n  DeviceInfo,\n  TransistorAuthorizationToken\n} from \"cordova-background-geolocation-lt\";  // <-- Use \"cordova-background-geolocation\" for customers-only version\n\n\nexport default BackgroundGeolocation;\n\nexport {\n  State,\n  Config,\n  Location,\n  LocationError,\n  Geofence,\n  HttpEvent,\n  MotionActivityEvent,\n  ProviderChangeEvent,\n  MotionChangeEvent,\n  GeofenceEvent,\n  GeofencesChangeEvent,\n  HeartbeatEvent,\n  ConnectivityChangeEvent,\n  DeviceSettings,\n  DeviceSettingsRequest,\n  SQLQuery,\n  Authorization, AuthorizationEvent,\n  DeviceInfo,\n  TransistorAuthorizationToken\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/cordova-background-geolocation.ts","const ENV = {\n\tTRACKER_HOST: 'http://tracker.transistorsoft.com'\n}\n\nexport default ENV;\n\n\n// WEBPACK FOOTER //\n// ./src/ENV.ts","import {NavController} from \"ionic-angular\"\n\nimport BackgroundGeolocation, {\n  HttpEvent,\n  TransistorAuthorizationToken\n} from \"../cordova-background-geolocation\";\n\nimport ENV from \"../ENV\";\n\nlet onHttp:any;\n\nexport async function registerTransistor():Promise<TransistorAuthorizationToken> {\n  let localStorage = (<any>window).localStorage;\n  let orgname = localStorage.getItem('orgname');\n  let username = localStorage.getItem('username');\n  if (orgname == null || username == null) {\n  \tthis.navCtrl.setRoot('HomePage');\n  \treturn {\n      accessToken: \"DUMMY_TOKEN\",\n      refreshToken: \"DUMMY_TOKEN\",\n      expires: -1,\n      url: ''\n    };\n  }\n  let token:TransistorAuthorizationToken = await BackgroundGeolocation.findOrCreateTransistorAuthorizationToken(orgname, username, ENV.TRACKER_HOST);\n\n  await BackgroundGeolocation.setConfig({\n    transistorAuthorizationToken: token\n  });\n  return token;\n}\n\nexport async function registerTransistorAuthorizationListener(navCtrl:NavController) {\n  console.log('[registerTransistorAuthorizationListener]');\n\n\tif (typeof(onHttp) === 'function') {\n\t\tawait BackgroundGeolocation.removeListener('http', onHttp);\n  }\n  onHttp = async function onHttp(event:HttpEvent) {\n    switch(event.status) {\n      case 403:\n      case 406:\n        await BackgroundGeolocation.destroyTransistorAuthorizationToken(ENV.TRACKER_HOST);\n        let token = await registerTransistor();\n        if (token.accessToken !== 'DUMMY_TOKEN') {\n          await BackgroundGeolocation.setConfig({\n            transistorAuthorizationToken: token\n          });\n          BackgroundGeolocation.sync();\n        }\n        break;\n      case 410:\n        let localStorage = (<any>window).localStorage;\n        localStorage.removeItem('username');\n        navCtrl.setRoot('HomePage')\n        break;\n    }\n  };\n\n\tBackgroundGeolocation.onHttp(onHttp);\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/authorization.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app.module';\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { BrowserModule } from '@angular/platform-browser';\nimport { ErrorHandler, NgModule } from '@angular/core';\nimport { IonicApp, IonicErrorHandler, IonicModule } from 'ionic-angular';\nimport { SplashScreen } from '@ionic-native/splash-screen';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { Dialogs } from '@ionic-native/dialogs';\n\nimport { MyApp } from './app.component';\n\n@NgModule({\n  declarations: [\n    MyApp\n  ],\n  imports: [\n    BrowserModule,\n    IonicModule.forRoot(MyApp)\n  ],\n  bootstrap: [IonicApp],\n  entryComponents: [\n    MyApp\n  ],\n  providers: [\n    StatusBar,\n    SplashScreen,\n    Dialogs,\n    {provide: ErrorHandler, useClass: IonicErrorHandler}\n  ]\n})\nexport class AppModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Component, ViewChild } from '@angular/core';\nimport { Platform, NavController } from 'ionic-angular';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\n\nimport {registerTransistorAuthorizationListener} from \"../lib/authorization\";\n\n// Determine initial Root page (ie: which app to launch -- HelloWorld, AdvancedApp, SimpleMap or Home)\nlet localStorage = (<any>window).localStorage;\nlet orgname = localStorage.getItem('orgname');\nlet username = localStorage.getItem('username');\nlet isRegistered = (orgname && username);\nlet root = (isRegistered) ? localStorage.getItem('page') : 'HomePage'\n\n@Component({\n  templateUrl: 'app.html'\n})\nexport class MyApp {\n  @ViewChild('rootNav') nav: NavController\n  rootPage:string = root || 'HomePage';\n\n  platform: Platform;\n\n  constructor(platform: Platform, statusBar: StatusBar, splashScreen: SplashScreen) {\n    this.platform = platform;\n\n    platform.ready().then(() => {\n      // Okay, so the platform is ready and our plugins are available.\n      // Here you can do any higher level native things you might need.\n      statusBar.styleDefault();\n\n      // Dark statusbar for Android\n      if (platform.is('android')) {\n        statusBar.overlaysWebView(false);\n        statusBar.backgroundColorByHexString('#272727');\n      }\n      splashScreen.hide();\n    });\n  }\n\n  // Wait for the components in MyApp's template to be initialized\n  // In this case, we are waiting for the Nav with reference variable of \"#myNav\"\n  ngOnInit() {\n    this.platform.ready().then(() => {\n      // Handle authorization failures from tracker.transistorsoft.com Demo server.\n      registerTransistorAuthorizationListener(this.nav);\n    });\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts"],"sourceRoot":""}